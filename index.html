<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Solid Matter Travel · Property</title>
  <meta name="description" content="Solid Matter Travel & Tours – Holiday rental showcase." />
  <style>
    :root{
      --brand:#0f2742;
      --accent:#22a6b3;
      --ink:#1a1a1a;
      --muted:#6b7280;
      --bg:rgba(247,248,251,.6);
      --card:#ffffff;
      --ring:rgba(34,166,179,.25);
      --radius:18px;
      --shadow:0 10px 24px rgba(0,0,0,.07);
      --danger:#dc2626;
      --success:#16a34a;
      --bg-img:url('https://res.cloudinary.com/dmrvd8fwt/image/upload/v1763223639/Dubai_Background_qf9dkk.png');
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;
      color:var(--ink);
      background-image:var(--bg-img);
      background-position:center center;
      background-size:cover;
      background-repeat:no-repeat;
      background-attachment:fixed;
    }
    @supports (-webkit-touch-callout: none){ body{background-attachment:scroll} }

    .page-bg{ background:var(--bg); min-height:100dvh; }

    a{color:var(--accent);text-decoration:none}
    .wrap{max-width:1100px;margin:auto;padding:24px}

    /* HEADER: transparent and NOT sticky */
    header{position:relative;background:transparent;border:none;z-index:1000}
    .header-inner{display:flex;align-items:center;justify-content:flex-start;gap:16px;padding:14px 24px}
    .brand{display:flex;align-items:center;gap:12px;justify-content:flex-start;width:100%;position:relative}
    .logo{flex:0 0 auto}
    .logo img{width:120px;height:auto;object-fit:contain}
    /* Center the title perfectly within the wrap, regardless of the logo width */
    .brand h1{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      margin:0;
      font-size:32px;               /* bigger title */
      font-weight:800;              /* bold */
      color:#ffffff;                /* white */
      letter-spacing:.5px;
      text-shadow:0 1px 2px rgba(0,0,0,.35);
      white-space:nowrap;
      pointer-events:none;          /* clicks pass through */
    }

    /* HERO is inside the same .wrap as the card -> exact width match */
    .hero{
      margin:0;
      padding:28px 24px 8px 24px;
      background:rgba(15,39,66,.78);
      color:#fff;
      text-align:center;
      border-top-left-radius:var(--radius);
      border-top-right-radius:var(--radius);
      border-bottom-left-radius:0;
      border-bottom-right-radius:0;
    }
    .hero h2{margin:0;font-size:28px;display:inline-block}
    .hero p{margin:6px 0 0 0;color:#cbd5e1}
    .hero .property-label{
      display:block;margin-bottom:8px;font-size:14px;letter-spacing:1px;
      text-transform:uppercase;color:#a8c5e5;font-weight:600
    }

    /* CARD kisses hero (no seam) */
    .card{
      background:var(--card);
      border-radius:var(--radius);
      border-top-left-radius:0;
      border-top-right-radius:0;
      box-shadow:var(--shadow);
      overflow:hidden;
      border:1px solid #eef2f7;
      margin-top:0;
    }

    .carousel{position:relative;height:580px;background:#000}
    .carousel img{width:100%;height:580px;object-fit:cover;display:block}
    .nav-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.45);border:none;color:#fff;width:42px;height:42px;border-radius:999px;cursor:pointer}
    .nav-btn:hover{background:rgba(0,0,0,.6)}
    .prev{left:12px}
    .next{right:12px}
    .badge{position:absolute;bottom:12px;left:12px;background:rgba(255,255,255,.92);padding:6px 10px;border-radius:999px;font-size:12px;color:var(--ink);box-shadow:0 6px 16px rgba(0,0,0,.1)}

    .body{padding:18px 18px 14px 18px}
    .title{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .title h3{margin:0;font-size:22px}
    .meta{margin:8px 0 12px 0;color:var(--muted);font-size:14px}
    .features{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}
    .features span{font-size:12px;background:#f2f6fa;border:1px solid #e6ecf3;padding:6px 10px;border-radius:999px}

    .two-col{display:grid;grid-template-columns:1.4fr .9fr;gap:22px}
    @media (max-width:900px){.two-col{grid-template-columns:1fr}}

    .panel{background:#fff;border:1px solid #eef2f7;border-radius:14px;padding:14px}
    .panel h4{margin:0 0 6px 0;color:var(--brand)}
    .panel p{margin:0;color:var(--muted)}
    ul{margin:8px 0 0 18px;color:var(--ink)}

    .actions{display:flex;gap:10px;margin-top:14px;justify-content:center}
    .btn{padding:12px 18px;border-radius:12px;border:1px solid #dfe6ee;background:#fff;cursor:pointer;text-align:center;text-decoration:none}
    .btn.primary{background:var(--accent);color:#fff;border-color:var(--accent)}

    footer{padding:30px 24px;color:#fff;text-align:center;background:rgba(15,39,66,.85)}

    /* ===== Editor overlay ===== */
    .edit-toggle{
      position:fixed;
      bottom:18px;
      right:18px;
      padding:10px 12px;
      border-radius:12px;
      background:var(--brand);
      color:#fff;
      border:0;
      cursor:pointer;
      box-shadow:var(--shadow);
      z-index:20;
      display:none; /* HIDDEN BY DEFAULT – only shown when ?edit=1 */
      align-items:center;
      gap:8px;
    }
    .editor{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:30}
    .editor.open{display:flex}
    .editor .sheet{width:min(920px,95vw);max-height:90vh;overflow:auto;background:#fff;border-radius:16px;box-shadow:var(--shadow);border:1px solid #e6ecf3}
    .sheet header{position:sticky;top:0;background:#fff;border-bottom:1px solid #eef2f7;padding:12px 16px;display:flex;align-items:center;justify-content:space-between}
    .sheet h3{margin:0;font-size:18px;color:var(--brand)}
    .sheet .close{border:0;background:#f3f4f6;padding:8px 10px;border-radius:10px;cursor:pointer}
    .sheet .body{padding:16px;display:grid;gap:14px}
    .grid{display:grid;gap:12px;grid-template-columns:1fr 1fr}
    .grid label{font-size:13px;color:var(--muted)}
    .grid input,.grid textarea{width:100%;padding:10px;border-radius:10px;border:1px solid #e3e8ef;font:inherit}
    .grid textarea{min-height:90px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
    .hint{font-size:12px;color:var(--muted)}
    .error{color:var(--danger);font-size:13px}
    .success{color:var(--success);font-size:13px}
    .tabs{display:flex;gap:8px;margin:6px 0}
    .tab{padding:6px 10px;border-radius:10px;border:1px solid #e3e8ef;background:#fff;cursor:pointer}
    .tab.active{background:#eef6f7;border-color:var(--ring)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .row .spacer{flex:1}
  </style>
</head>
<body>
  <div class="page-bg">
    <header>
      <div class="header-inner wrap">
        <div class="brand">
          <div class="logo">
            <img id="logo" src="https://res.cloudinary.com/dmrvd8fwt/image/upload/v1755934208/Logo1_Use_xuoqgm.png" alt="Solid Matter Travel logo" />
          </div>
          <h1 id="company">Solid Matter Travel & Tours</h1>
        </div>
      </div>
    </header>

    <main class="wrap">
      <!-- HERO inside .wrap so width matches card exactly -->
      <section class="hero">
        <span class="property-label">Property</span>
        <h2 id="propName">Property Name</h2>
        <p id="propMeta">Guests · Bedrooms · Bathrooms</p>
      </section>

      <article class="card">
        <div class="carousel" id="carousel" data-index="0">
          <img id="hero" src="" alt="Hero image" />
          <button class="nav-btn prev" id="prev">‹</button>
          <button class="nav-btn next" id="next">›</button>
          <div class="badge" id="badge"></div>
        </div>
        <div class="body">
          <div class="title"><h3>Highlights</h3></div>
          <div class="features" id="features"></div>

          <div class="two-col">
            <div class="panel">
              <h4>Overview</h4>
              <p id="overview">Overview text here.</p>
              <ul id="overviewList"></ul>
            </div>
            <div class="panel">
              <h4>Quick Facts</h4>
              <ul>
                <li id="qGuests"></li>
                <li id="qBeds"></li>
                <li id="qBaths"></li>
                <li>Wi-Fi, Smart TV</li>
                <li>Communal pool access</li>
              </ul>
            </div>
          </div>

          <div class="actions">
            <a class="btn primary" id="whatsappCta" target="_blank" rel="noopener">Message us on WhatsApp</a>
            <a class="btn" id="emailCta" href="#">Email: info@smtravel.co.za</a>
          </div>
        </div>
      </article>
    </main>

    <footer>
      © <span id="year"></span> Solid Matter Travel & Tours · Johannesburg · Dubai · info@smtravel.co.za
    </footer>

    <!-- ===== Editor toggle button (only shown when ?edit=1) ===== -->
    <button class="edit-toggle" id="editToggle" type="button" aria-controls="editor" aria-expanded="false">✏️ Update</button>

    <!-- ===== Editor overlay ===== -->
    <div class="editor" id="editor" aria-hidden="true">
      <div class="sheet">
        <header>
          <h3>Update Property</h3>
          <button class="close" id="closeEditor" type="button">Close</button>
        </header>
        <div class="body">
          <div class="tabs">
            <button class="tab active" id="tabForm" type="button">Form</button>
            <button class="tab" id="tabJson" type="button">Paste JSON</button>
          </div>

          <div id="formView">
            <div class="grid">
              <div>
                <label>Company Name</label>
                <input id="f_company" type="text" />
              </div>
              <div>
                <label>Logo URL</label>
                <input id="f_logo" type="url" />
              </div>
              <div>
                <label>Property Name</label>
                <input id="f_name" type="text" required />
              </div>
              <div>
                <label>Location</label>
                <input id="f_location" type="text" placeholder="e.g., Camps Bay, Cape Town" />
              </div>
              <div>
                <label>Guests</label>
                <input id="f_guests" type="number" min="1" />
              </div>
              <div>
                <label>Bedrooms</label>
                <input id="f_beds" type="number" min="1" />
              </div>
              <div>
                <label>Bathrooms</label>
                <input id="f_baths" type="number" min="1" />
              </div>
              <div>
                <label>WhatsApp Number</label>
                <input id="f_whatsapp" type="text" placeholder="+971 582003251" />
              </div>
              <div>
                <label>Highlights (one per line)</label>
                <textarea id="f_highlights" placeholder="Sea & mountain views&#10;Backup power"></textarea>
              </div>
              <div>
                <label>Images (≥ 8 URLs, one per line)</label>
                <textarea id="f_images" placeholder="https://.../1.jpg&#10;https://.../2.jpg"></textarea>
                <div class="hint">Tip: First URL becomes the hero image.</div>
              </div>
              <div>
                <label>Overview (short paragraph)</label>
                <textarea id="f_overview" placeholder="One or two sentences about the property"></textarea>
              </div>
              <div>
                <label>Overview bullets (optional, one per line)</label>
                <textarea id="f_overview_list" placeholder="Chef’s kitchen&#10;Al fresco dining"></textarea>
              </div>
            </div>
            <div class="row">
              <span id="err" class="error"></span>
              <span id="ok" class="success"></span>
              <span class="spacer"></span>
              <button class="tab" id="applyBtn" type="button">Apply</button>
              <button class="tab" id="exportBtn" type="button">Save JSON</button>
            </div>
          </div>

          <div id="jsonView" style="display:none">
            <label>Paste full PROPERTY JSON</label>
            <textarea id="jsonInput" style="width:100%;min-height:220px" placeholder='{"name":"Villa ...","images":["https://.../1.jpg", "https://.../2.jpg", ...]}'></textarea>
            <div class="row">
              <span id="jsonErr" class="error"></span>
              <span class="spacer"></span>
              <button class="tab" id="applyJson" type="button">Apply JSON</button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <script>
    // ======= SOURCE OF TRUTH =======
    const PROPERTY = {
      "company": "Solid Matter Travel & Tours",
      "logoUrl": "https://res.cloudinary.com/dmrvd8fwt/image/upload/v1755934208/Logo1_Use_xuoqgm.png",
      "name": "Duplex Villa in the heart of JBR",
      "location": "Dubai",
      "guestCount": 10,
      "bedrooms": 4,
      "bathrooms": 4.5,
      "highlights": [
        "Full sea view in prime JBR",
        "4 luxe bedrooms, 3 ensuite",
        "Spacious living for up to 15 guests",
        "Beach, pool & gym access",
        "Steps from JBR Walk & Marina"
      ],
      "images": [
        "https://res.cloudinary.com/dmrvd8fwt/image/upload/v1763220202/1_x67eoq.jpg",
        "https://res.cloudinary.com/dmrvd8fwt/image/upload/v1763220202/2_jirf1a.jpg",
        "https://res.cloudinary.com/dmrvd8fwt/image/upload/v1763220203/6_zipxxg.jpg",
        "https://res.cloudinary.com/dmrvd8fwt/image/upload/v1763220203/5_cn7o25.jpg",
        "https://res.cloudinary.com/dmrvd8fwt/image/upload/v1763220203/7_hl5gtu.jpg",
        "https://res.cloudinary.com/dmrvd8fwt/image/upload/v1763220202/4_ibzc7l.jpg",
        "https://res.cloudinary.com/dmrvd8fwt/image/upload/v1763220204/8_owpza0.jpg",
        "https://res.cloudinary.com/dmrvd8fwt/image/upload/v1763220203/3_n3w6jz.jpg"
      ],
      "whatsapp": "+971 582003251",
      "email": "info@smtravel.co.za",
      "overview": "A stylish 4-bedroom villa in the heart of JBR with sweeping sea views, modern interiors, and instant access to the beach, dining, shopping, and Dubai Marina. Perfect for families, groups, and business travelers wanting comfort and convenience in one place.",
      "overviewList": [
        "Modern beach-inspired design",
        "Fully equipped high-end kitchen",
        "Premium king-bed bedrooms",
        "Fast Wi-Fi & full amenities",
        "Prime Rimal 5 location on JBR Walk"
      ]
    };

    // ======= RENDER FROM CONFIG =======
    const el = (id)=>document.getElementById(id);
    function render(){
      el('company').textContent = PROPERTY.company || 'Solid Matter Travel & Tours';
      el('logo').src = PROPERTY.logoUrl || '';
      el('propName').textContent = `${PROPERTY.name || ''}${PROPERTY.location ? ', ' + PROPERTY.location : ''}`;
      const meta = [
        PROPERTY.guestCount? `${PROPERTY.guestCount} guests` : null,
        PROPERTY.bedrooms? `${PROPERTY.bedrooms} bedrooms` : null,
        PROPERTY.bathrooms? `${PROPERTY.bathrooms} bathrooms` : null,
      ].filter(Boolean).join(' · ');
      el('propMeta').textContent = meta;

      if(Array.isArray(PROPERTY.images) && PROPERTY.images.length){
        el('hero').src = PROPERTY.images[0];
      }
      el('badge').textContent = meta.replace('bedrooms','bd').replace('bathrooms','ba');

      const features = el('features');
      features.innerHTML = '';
      (PROPERTY.highlights||[]).forEach(h=>{
        const s=document.createElement('span');
        s.textContent=h;
        features.appendChild(s);
      });

      el('overview').textContent = PROPERTY.overview || '';
      const ol = el('overviewList');
      ol.innerHTML = '';
      (PROPERTY.overviewList||[]).forEach(i=>{
        const li=document.createElement('li');
        li.textContent=i;
        ol.appendChild(li);
      });

      const waText = encodeURIComponent(`Hi ${PROPERTY.company||'Solid Matter Travel'}, I’d like to enquire about ${PROPERTY.name||'the property'}. My dates are … and group size is …`);
      const waNum = (PROPERTY.whatsapp||'').replace(/[^0-9]/g,'');
      el('whatsappCta').href = waNum? `https://wa.me/${waNum}?text=${waText}` : '#';
      el('emailCta').href = `mailto:${PROPERTY.email}?subject=${encodeURIComponent((PROPERTY.name||'Property')+' Enquiry')}`;

      el('qGuests').textContent = `Guests: ${PROPERTY.guestCount}`;
      el('qBeds').textContent   = `Bedrooms: ${PROPERTY.bedrooms}`;
      el('qBaths').textContent  = `Bathrooms: ${PROPERTY.bathrooms}`;
    }

    // ======= CAROUSEL =======
    const heroImg = el('hero');
    const prevBtn = el('prev');
    const nextBtn = el('next');
    let idx = 0;
    function setImage(i){
      const imgs = PROPERTY.images||[];
      if(!imgs.length) return;
      idx = (i + imgs.length) % imgs.length;
      heroImg.src = imgs[idx];
    }
    prevBtn.addEventListener('click', ()=> setImage(idx-1));
    nextBtn.addEventListener('click', ()=> setImage(idx+1));
    document.addEventListener('keydown', (e)=>{
      if(e.key==='ArrowLeft') setImage(idx-1);
      if(e.key==='ArrowRight') setImage(idx+1);
    });

    // ======= EDITOR =======
    const editBtn = el('editToggle');
    const editor = el('editor');
    const closeEditor = el('closeEditor');
    const tabForm = el('tabForm');
    const tabJson = el('tabJson');
    const formView = el('formView');
    const jsonView = el('jsonView');

    function qs(name){
      return new URLSearchParams(location.search).get(name);
    }

    function showEditor(){
      editor.classList.add('open');
      editor.setAttribute('aria-hidden','false');
      editBtn.setAttribute('aria-expanded','true');
      fillForm();
      clearMsgs();
    }
    function hideEditor(){
      editor.classList.remove('open');
      editor.setAttribute('aria-hidden','true');
      editBtn.setAttribute('aria-expanded','false');
    }

    // Only show the button + auto-open when ?edit=1
    const isEditMode = qs('edit') === '1';
    if (isEditMode) {
      editBtn.style.display = 'inline-flex';
      showEditor();
    } else {
      editBtn.style.display = 'none';
    }

    editBtn.addEventListener('click', showEditor);
    closeEditor.addEventListener('click', hideEditor);

    tabForm.addEventListener('click', ()=>{
      tabForm.classList.add('active');
      tabJson.classList.remove('active');
      formView.style.display='block';
      jsonView.style.display='none';
    });
    tabJson.addEventListener('click', ()=>{
      tabJson.classList.add('active');
      tabForm.classList.remove('active');
      jsonView.style.display='block';
      formView.style.display='none';
    });

    function fillForm(){
      el('f_company').value = PROPERTY.company||'';
      el('f_logo').value    = PROPERTY.logoUrl||'';
      el('f_name').value    = PROPERTY.name||'';
      el('f_location').value= PROPERTY.location||'';
      el('f_guests').value  = PROPERTY.guestCount||'';
      el('f_beds').value    = PROPERTY.bedrooms||'';
      el('f_baths').value   = PROPERTY.bathrooms||'';
      el('f_whatsapp').value= PROPERTY.whatsapp||'';
      el('f_highlights').value = (PROPERTY.highlights||[]).join('\n');
      el('f_images').value     = (PROPERTY.images||[]).join('\n');
      el('f_overview').value   = PROPERTY.overview||'';
      el('f_overview_list').value = (PROPERTY.overviewList||[]).join('\n');
    }

    function clearMsgs(){
      el('err').textContent='';
      el('ok').textContent='';
      el('jsonErr').textContent='';
    }
    function parseLines(text){
      return (text||'').split(/\r?\n/).map(s=>s.trim()).filter(Boolean);
    }
    function validateImages(arr){
      return Array.isArray(arr) && arr.length >= 8;
    }

    el('applyBtn').addEventListener('click', ()=>{
      clearMsgs();
      const next = {
        company:  el('f_company').value.trim() || PROPERTY.company,
        logoUrl:  el('f_logo').value.trim()    || PROPERTY.logoUrl,
        name:     el('f_name').value.trim()    || PROPERTY.name,
        location: el('f_location').value.trim(),
        guestCount: Number(el('f_guests').value)|| PROPERTY.guestCount,
        bedrooms:   Number(el('f_beds').value)  || PROPERTY.bedrooms,
        bathrooms:  Number(el('f_baths').value) || PROPERTY.bathrooms,
        whatsapp:   el('f_whatsapp').value.trim()|| PROPERTY.whatsapp,
        highlights: parseLines(el('f_highlights').value),
        images:     parseLines(el('f_images').value),
        overview:   el('f_overview').value.trim(),
        overviewList: parseLines(el('f_overview_list').value)
      };

      if(!validateImages(next.images)){
        el('err').textContent = 'Please add at least 8 image URLs (one per line).';
        return;
      }

      Object.assign(PROPERTY, next);
      render();
      setImage(0);
      el('ok').textContent = 'Updated!';
    });

    el('exportBtn').addEventListener('click', ()=>{
      const data = JSON.stringify(PROPERTY, null, 2);
      const blob = new Blob([data], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = (PROPERTY.name||'property')+'.json';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

    el('applyJson').addEventListener('click', ()=>{
      clearMsgs();
      try{
        const obj = JSON.parse(el('jsonInput').value);
        if(!validateImages(obj.images)) throw new Error('JSON must include images array with at least 8 URLs.');
        Object.assign(PROPERTY, obj);
        render();
        setImage(0);
        tabForm.click();
        el('ok').textContent = 'Updated from JSON!';
      }catch(e){
        el('jsonErr').textContent = e.message;
      }
    });

    document.getElementById('year').textContent = new Date().getFullYear();
    render();
  </script>
</body>
</html>
